<h3><%= @user.name %></h3>
<% if @user.photographer %>
  <span class="glyphicon glyphicon-camera"></span>Photographer
<% end %>
<hr>
<h5><%= @user.address %></h5>
<h5><%= @user.phone %> | <a href="mailto:<%= @user.email %>"><%= @user.email %></a></h5>

<div id="map" style='width: 100%; height: 400px;'></div>
<script type="text/javascript">
  handler = Gmaps.build('Google', { markers: { clusterer: undefined  } });
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(<%= raw @hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(12);
  });
</script>

<% if @user.categories.any? %>
  <hr>
  <h4>Categories:</h4>
  <ul>
    <% @user.categories.each do |category| %>
      <li><%= link_to category.name, category_path(category) %></li>
    <% end %>
  </ul>
<% end %>

<% if @user.images.any? %>
  <hr>
  <h4>Images:</h4>
  <% @user.images.each do |image| %>
    <%= link_to user_image_path(@user, image) do %>
      <%= image_tag image.img_file.url(:default) %>
    <% end %>
  <% end %>
<% end %>

<% if @user.photographer && session[:user_id] === @user.id %>
  <hr>
  <p><%= link_to "upload photos", new_user_image_path(@user), class:"btn btn-primary" %></p>
<% end %>

<hr>
<h4>Postings:</h4>
<% if @user.postings.any? %>
  <ul>
    <% @user.postings.each do |posting| %>
      <li><%= link_to posting.title, posting_path(posting) %></li>
    <% end %>
  </ul>
<% else %>
  <p>no postings</p>
<% end %>

<hr>
<% if session[:user_id] === @user.id %>
  <%= link_to "edit", edit_user_path(@user), class:"btn btn-primary" %>
  <%= link_to "delete", user_path(@user),
                         :data => {:method => "delete"}, class:"btn btn-danger" %>
<% end %>
<p><%= link_to "return to photographers", users_path %></p>
